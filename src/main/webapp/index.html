<html ng-app="scd">

<head>
    <meta charset="utf-8">
    <title>Sistema De Controle Difuso</title>

    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <script src="bower_components/angular/angular.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers/scdCtrl.js"></script>

</head>

<body ng-controller="scdCtrl">
    <div class="container">

        <div class="col-sm-4">
            <div class="panel panel-default">
                <div class="panel-heading">Variaveis</div>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Descrição</th>
                        <th>Objetivo</th>
                        <th></th>
                        <th></th>
                    </tr>
                    <tr ng-repeat="variavel in variaveis">
                        <td>{{variavel.descricao}}</td>
                        <td>{{variavel.objetivo}}</td>
                        <td><span class="glyphicon glyphicon-pencil" ng-click="editarVariavel(variavel)"></span></td>
                        <td><span class="glyphicon glyphicon-remove" ng-click="removerVariavel(variaveis, variavel)"></span></td>
                    </tr>
                </table>
            </div>
            <input type="text" class="form-control" ng-model="variavel.descricao" placeholder="Descrição" />
            <div class="inputs-group col-sm-12">
                <div>
                    <h3 class="panel-title">Objetivo</h3>
                </div>
                <div>
                    <div class="col-sm-12">
                        <label>
                            <input type="radio" ng-model="variavel.objetivo" value="Sim"> Sim
                        </label>
                        <label>
                            <input type="radio" ng-model="variavel.objetivo" value="Nao"> Não
                        </label>
                    </div>
                </div>
            </div>
            <button class="btn btn-primary btn-block" ng-click="adicionarVariavel(variavel)" ng-show="!editandoVariavel">Adicionar</button>
            <button class="btn btn-primary btn-block" ng-click="salvarVariavel(variavel)" ng-show="editandoVariavel">Salvar</button>
        </div>
        <div class="col-sm-8">
            <div class="panel panel-default">
                <div class="panel-heading">Termos: {{variavel.descricao}}</div>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th>Descrição</th>
                        <th>Inicio Suporte</th>
                        <th>Fim Suporte</th>
                        <th>Inicio Nucleo</th>
                        <th>Fim Nucleo</th>
                        <th></th>
                        <th></th>
                    </tr>
                    <tr ng-repeat="termo in variavel.termos">
                        <td>{{termo.descricao}}</td>
                        <td>{{termo.suporte.inicio}}</td>
                        <td>{{termo.suporte.fim}}</td>
                        <td>{{termo.nucleo.inicio}}</td>
                        <td>{{termo.nucleo.fim}}</td>
                        <td><span class="glyphicon glyphicon-pencil" ng-click="editarTermo(termo)"></span></td>
                        <td><span class="glyphicon glyphicon-remove" ng-click="removerTermo(variavel, termo)"></span></td>
                    </tr>
                </table>
            </div>
            <input type="text" class="form-control" ng-model="termo.descricao" placeholder="Descrição" />
            <div class="inputs-group col-sm-12">
                <div>
                    <h3 class="panel-title">Suporte</h3>
                </div>
                <div>
                    <div class="col-sm-6">
                        <input type="number" class="form-control" ng-model="termo.suporte.inicio" placeholder="Suporte Inicial"/>
                    </div>
                    <div class="col-sm-6">
                        <input type="number" class="form-control" ng-model="termo.suporte.fim" placeholder="Suporte Final"/>
                    </div>
                </div>
            </div>
            <div class="inputs-group col-sm-12">
                <div>
                    <h3 class="panel-title">Nucleo</h3>
                </div>
                <div>
                    <div class="col-sm-6">
                        <input type="number" class="form-control" ng-model="termo.nucleo.inicio" placeholder="Nucleo Inicial"/>
                    </div>
                    <div class="col-sm-6">
                        <input type="number" class="form-control" ng-model="termo.nucleo.fim" placeholder="Nucleo Final"/>
                    </div>
                </div>
            </div>
            <button class="btn btn-primary btn-block" ng-click="adicionarTermo(variavel, termo)" ng-show="!editandoTermo">Adicionar</button>
            <button class="btn btn-primary btn-block" ng-click="salvarTermo()" ng-show="editandoTermo">Salvar</button>
        </div>
        <div class="col-sm-12" ng-show="variavelObjetivo.termos.length > 0" style="margin-top: 15px;">
            <div class=" col-sm-4">
                <div class="panel panel-default">
                    <div class="panel-heading">Regras dos termos objetivos de {{variavelObjetivo.descricao}}</div>
                    <table class="table table-striped table-bordered">
                        <tr ng-repeat="termoObjetivo in variavelObjetivo.termos">
                            <td>{{termoObjetivo.descricao}}</td>
                            <td><span class="glyphicon glyphicon-pencil" ng-click="editarCondicoes(termoObjetivo)"></span></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-sm-8">
                <div ng-repeat="condicao in termoObjetivo.condicoes">
                    <div class=" col-sm-6">
                        <select class="form-control" ng-model="condicao.variavel" ng-options="variavel.descricao for variavel in variaveis  | filter:{objetivo: 'Nao'}">
                             <option value="">Selecione uma variavel</option>
                        </select>
                    </div>
                    <div class=" col-sm-6">
                        <select class="form-control" ng-model="condicao.termo" ng-options="termo.descricao for termo in condicao.variavel.termos">
                             <option value="">Selecione um Termo</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary btn-block" ng-show="termoObjetivo.condicoes.length > 0" ng-click="adicionarCondicao()">Adicionar Condicao</button>
            </div>
        </div>
        <div class="col-sm-12">
            <button class="btn btn-primary btn-block">Processar</button>
        </div>
    </div>
</body>

</html>